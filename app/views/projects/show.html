<div class="container">
    <h1>
      {{ projectCtrl.project.title }}
    </h1>
    <span class="text-muted">
      <i class="fa fa-clock-o" aria-hidden="true"></i>
      <small>Created {{ projectCtrl.project.created_at }}</small>
      <div>
        <span class="label label-danger">Project</span>
        originating from <a ui-sref="showProposal({ id: projectCtrl.project.proposal_id })">this proposal</a>.
      </div>
    </span>


    <hr>
    <h2>Description</h2>
      <p>
        {{ projectCtrl.project.description }}

        <p class="text-muted" ng-if="!projectCtrl.proposal.description">
          No description.
        </p>
      </p>

    <hr>
    <h2>Participants</h2>
    <ul class="list-group">
      <!-- Students -->
      <a href="#" class="list-group-item list-group-item-warning" ng-repeat="student in projectCtrl.project.team.users | orderBy: 'username'">
        {{ student.username }}
        <i class="fa fa-graduation-cap pull-right" aria-hidden="true"></i>
      </a>

      <!-- If there are no students -->
      <p class="text-muted" ng-if="projectCtrl.project.team.users == 0">
        There are no participants for this project.
      </li>
    </ul>

    <hr>
    <h2>Attachments</h2>
    <ul class="list-group">

      <a href="{{ attachment.url }}" class="list-group-item" ng-repeat="attachment in projectCtrl.project.attachments | orderBy: 'attachment.created_at'">
        {{ attachment.title }}
        <i class="fa fa-download pull-right" aria-hidden="true"></i>
      </a>

      <!-- If there are no attachments -->
      <p class="text-muted" ng-if="projectCtrl.project.attachments.length == 0">
        There are no attachments for this project.
      </p>

    </ul>

  <div class="comments" ng-if="projectCtrl.isCommentable()">
    <hr>
    <h2>Comments</h2>

    <div class="row" ng-repeat="comment in projectCtrl.comments">

      <div class="col-md-2">
        <div class="authorbox">
          <!-- <a href="#"> -->
            <span>{{ comment.author.username }}</span>
          <!-- </a> -->
          <div class="commentRole text-muted">
            <span ng-if="comment.author.role_id == 1">
              Customer
              <span class="fa fa-user" aria-hidden="true"></span>
            </span>
            <span ng-if="comment.author.role_id == 2">
              Student
              <span class="fa fa-graduation-cap" aria-hidden="true"></span>
            </span>
            <span ng-if="comment.author.role_id == 3">
              Teacher
              <span class="fa fa-university" aria-hidden="true"></span>
            </span>
            <span ng-if="comment.author.role_id == 4">
              Admin
              <span class="fa fa-user-plus" aria-hidden="true"></span>
            </span>
          </div>
        </div>
      </div>

      <div class="col-md-8">
        <div class="dialogbox">
          <div class="body">
            <span class="tip"></span>
            <div class="message">
              <span>{{ comment.body }}</span>
            </div>
          </div>
          <div class="timestamp text-muted">
            <i class="fa fa-clock-o" aria-hidden="true"></i>
            <small>{{ comment.created_at }}</small>
          </div>
        </div>
      </div>

      <div class="row">
        <div ng-if="!$last" class="col-md-8 col-md-offset-2">
          <hr>
        </div>
      </div>

    </div>

    <p class="text-muted" ng-if="projectCtrl.comments.length == 0">
      No comments has been posted for this proposal.
    </p>

    <form class="postComment" ng-submit="projectCtrl.postComment()">
      <div class="form-group">
        <textarea class="form-control" ng-model="projectCtrl.comment.body"></textarea>
      </div>
      <button class="btn btn-primary">Post comment</button>
    </form>

  </div>
</div>
